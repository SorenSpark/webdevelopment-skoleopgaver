<!DOCTYPE html>
<html lang="da">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

</head>
<body>
 <main class="card" role="application" aria-label="Stopur med 1/100 sekund præcision">
<h1 class="title">Stopur — 1/100 s</h1>
<div class="display" id="display" aria-live="polite">00:00.00 <small id="precision">(centisekunder)</small></div>


<div class="controls">
<button id="startBtn" class="start" aria-pressed="false">Start</button>
<button id="stopBtn" class="stop" aria-pressed="false" disabled>Stop</button>
<button id="resetBtn" class="reset" aria-pressed="false" disabled>Nulstil</button>
</div>


<p class="meta">Præcision: 1/100 sekund (centisekunder). Brug Start, Stop og Nulstil.</p>
</main>


<script>
const display = document.getElementById('display');
const startBtn = document.getElementById('startBtn');
const stopBtn = document.getElementById('stopBtn');
const resetBtn = document.getElementById('resetBtn');


let startTime = 0;
let elapsedBefore = 0;
let running = false;
let raf = null;


function formatTime(ms){
const totalCentis = Math.floor(ms / 10);
const centis = totalCentis % 100;
const totalSeconds = Math.floor(totalCentis / 100);
const seconds = totalSeconds % 60;
const minutes = Math.floor(totalSeconds / 60);


const mm = String(minutes).padStart(2,'0');
const ss = String(seconds).padStart(2,'0');
const cs = String(centis).padStart(2,'0');
return `${mm}:${ss}.${cs}`;
}


function update(){
const now = performance.now();
const elapsed = elapsedBefore + (running ? now - startTime : 0);
display.textContent = formatTime(elapsed);
if(running) raf = requestAnimationFrame(update);
}


startBtn.addEventListener('click', ()=>{
if(running) return;
running = true;
startTime = performance.now();
startBtn.disabled = true;
stopBtn.disabled = false;
resetBtn.disabled = true;
raf = requestAnimationFrame(update);
});


stopBtn.addEventListener('click', ()=>{
if(!running) return;
running = false;
const now = performance.now();
elapsedBefore += now - startTime;
startBtn.disabled = false;
stopBtn.disabled = true;
resetBtn.disabled = false;
if(raf) cancelAnimationFrame(raf);
update();
});


resetBtn.addEventListener('click', ()=>{
running = false;
elapsedBefore = 0;
startTime = 0;
startBtn.disabled = false;
stopBtn.disabled = true;
resetBtn.disabled = true;
if(raf) cancelAnimationFrame(raf);
display.textContent = formatTime(0);
});


display.textContent = formatTime(0);
</script>
</body>
</html>